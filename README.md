# ESP8266-TFT-WeatherClock

基于 ESP8266 和 ST7789 TFT 屏幕的智能天气时钟。这是一个不仅能显示时间，还能实时感知天气的桌面小摆件。

![项目封面图](你的图片链接或者存放在GitHub的项目路径)

## ✨ 项目亮点

* **智能配网**：集成 `WiFiManager`，无需在代码中硬编码 WiFi 信息，通过手机连接热点即可配置网络及城市。
* **精准走时**：通过 NTP 协议获取网络时间，自动更新日期、星期及时间。
* **实时天气**：对接心知天气 (Seniverse) API，支持温度颜色提醒（如高温红色、低温青色）。
* **性能优化**：采用“脏标记 (Dirty Flag)”刷新逻辑，仅在数据变化或必要时刻更新屏幕内容，极大减轻 ESP8266 的 CPU 负担。
* **汉字显示**：自定义汉字取模，支持“晴”、“雨”、“多云”等天气状态的中文展示。
* **交互逻辑**：支持实时长按 Flash 按钮重置网络设置，方便更换使用环境。

## 🛠️ 硬件清单

* **微控制器**: ESP8266 (NodeMCU / WeMos D1 mini 等)
* **显示屏**: 240x320 ST7789 TFT (SPI 接口)
* **其他**: 连接线、3D 打印外壳 (可选)

## 📁 目录结构

* `sketch_jan30a.ino`: 项目主程序。
* `icons.h`: 存放天气图标位图数据。
* `chinese_fonts.h`: 存放汉字点阵数据。
* `tools.py`: **[特色工具]** 帮助你快速将图片或汉字转换为 Arduino 可用的十六进制数组。

## 🚀 快速上手

1.  **准备环境**: 安装 Arduino IDE，并添加 ESP8266 库。
2.  **安装依赖**: 在库管理器中安装以下库：
    * `Adafruit GFX Library`
    * `Adafruit ST7789 Library`
    * `ArduinoJson`
    * `WiFiManager`
3.  **获取 API Key**: 注册 [心知天气](https://www.seniverse.com/) 获取你的私钥，并填入代码中的 `apiKey` 变量。
4.  **烧录程序**: 连接 ESP8266，编译并上传。
5.  **配置网络**: 手机搜索并连接名为 `ESP8266_Clock_AP` 的热点，在弹出的页面中输入 WiFi 信息及城市拼音。

## 🛠️ 关于 tools.py

为了方便大家自定义，我编写了一个 Python 脚本。
* 如果你想更换天气图标或增加新的汉字，只需运行此脚本。
* 它能自动处理图片缩放及位图转换，生成可以直接粘贴到 `.h` 文件中的代码。

## 🤝 贡献与感谢

欢迎提交 Issue 或 Pull Request 来完善这个项目！
感谢 [心知天气] 提供的优质 API 服务。

## 📄 开源协议

本项目采用 [MIT License](LICENSE) 开源。
